diff --git a/Home/ayanavita-fontend-final/src/api/booking.api.ts b/Home/ayanavita-fontend-final/src/api/booking.api.ts
index b00ad1d3199ba1de7cbc9c89072b2693a5d56f45..25fd81f344ed6a545f91a6bddda423cd346553a5 100644
--- a/Home/ayanavita-fontend-final/src/api/booking.api.ts
+++ b/Home/ayanavita-fontend-final/src/api/booking.api.ts
@@ -15,30 +15,40 @@ export type BookingService = {
   description?: string | null;
   category?: string | null;
   goals: string[];
   durationMin: number;
   price: number;
   ratingAvg: number;
   bookedCount: number;
   tag?: string | null;
   icon?: string | null;
   imageUrl?: string | null;
   heroImageUrl?: string | null;
   branchIds: number[];
 };

 export type BookingSpecialist = {
   id: number;
   code: string;
   name: string;
   level: string;
   bio?: string | null;
   branchIds: number[];
   serviceIds: number[];
 };

 export const bookingApi = {
-  branches: async (): Promise<BookingBranch[]> => (await http.get("/booking/branches")).data,
-  services: async (): Promise<BookingService[]> => (await http.get("/booking/services")).data,
+  branches: async (params?: { serviceId?: number }): Promise<BookingBranch[]> =>
+    (await http.get("/booking/branches", { params })).data,
+  services: async (params?: { branchId?: number }): Promise<BookingService[]> => {
+    const { data } = await http.get("/booking/services", { params });
+    return Array.isArray(data) ? data : (data?.items ?? []);
+  },
   specialists: async (): Promise<BookingSpecialist[]> =>
     (await http.get("/booking/specialists")).data,
+  slotSuggestions: async (params: { branchId: number; serviceId: number; date: string }) =>
+    (await http.get("/booking/slot-suggestions", { params })).data as {
+      durationMin: number;
+      capacity: number;
+      slots: { time: string; available: boolean; occupied: number }[];
+    },
 };
diff --git a/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx b/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx
index 51d5ff184c58b58af071859ea6cfacbba3673f97..91f40f8351ae2e4fe35079fac795846bf500b765 100644
--- a/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx
+++ b/Home/ayanavita-fontend-final/src/components/booking/BookingForm.tsx
@@ -1,284 +1,220 @@
 // src/components/booking/BookingForm.tsx
 import React, { useEffect, useMemo, useState } from "react";
-import type { DemoBranch, DemoService, DemoStaff } from "../../services/booking.demo";
+import type { DemoBranch, DemoService } from "../../services/booking.demo";
 import type { Booking } from "../../services/booking.storage";
 import { uid, money, isValidPhone, toISODate } from "../../services/booking.utils";

 export type BookingDraft = {
   name: string;
   phone: string;
   email: string;
-  notify: "zalo" | "sms" | "email";
-  serviceId: string;
-  staffId: string; // "" means auto assign
-  branchId: string;
-  date: string; // yyyy-mm-dd
+  date: string;
   note: string;
 };

 export function BookingForm({
   services,
-  staff,
   branches,
+  selectedServiceId,
+  selectedBranchId,
   selectedSlot,
+  customTime,
+  onCustomTime,
   onToast,
   onCreate,
   onResetSignal,
   initialName,
+  onServiceChange,
+  onBranchChange,
+  onDateChange,
 }: {
   services: DemoService[];
-  staff: DemoStaff[];
   branches: DemoBranch[];
+  selectedServiceId: string;
+  selectedBranchId: string;
   selectedSlot: string | null;
+  customTime: string;
+  onCustomTime: (value: string) => void;
   onToast: (t: string, d?: string) => void;
   onCreate: (b: Booking) => void;
-  onResetSignal: number; // increase to reset
+  onResetSignal: number;
   initialName?: string;
+  onServiceChange: (serviceId: string) => void;
+  onBranchChange: (branchId: string) => void;
+  onDateChange: (date: string) => void;
 }) {
   const tomorrow = useMemo(() => toISODate(new Date(Date.now() + 86400000)), []);
   const [draft, setDraft] = useState<BookingDraft>(() => ({
     name: initialName || "",
     phone: "",
     email: "",
-    notify: "zalo",
-    serviceId: services[0]?.id || "",
-    staffId: "",
-    branchId: branches[0]?.id || "",
     date: tomorrow,
     note: "",
   }));

-  // sync name when user login demo
   useEffect(() => {
     if (initialName) setDraft((d) => ({ ...d, name: initialName }));
   }, [initialName]);

-  // external reset
   useEffect(() => {
     setDraft({
       name: initialName || "",
       phone: "",
       email: "",
-      notify: "zalo",
-      serviceId: services[0]?.id || "",
-      staffId: "",
-      branchId: branches[0]?.id || "",
       date: tomorrow,
       note: "",
     });
-    // eslint-disable-next-line react-hooks/exhaustive-deps
-  }, [onResetSignal]);
+    onDateChange(tomorrow);
+  }, [onResetSignal, initialName, onDateChange, tomorrow]);

-
-  useEffect(() => {
-    setDraft((d) => ({
-      ...d,
-      serviceId: d.serviceId || services[0]?.id || "",
-      branchId: d.branchId || branches[0]?.id || "",
-    }));
-  }, [services, branches]);
-
-  const svc = useMemo(() => services.find((s) => s.id === draft.serviceId), [services, draft.serviceId]);
-  const staffPick = useMemo(() => staff.find((s) => s.id === draft.staffId), [staff, draft.staffId]);
-  const branchPick = useMemo(() => branches.find((b) => b.id === draft.branchId), [branches, draft.branchId]);
+  const svc = useMemo(() => services.find((s) => s.id === selectedServiceId), [services, selectedServiceId]);
+  const branchPick = useMemo(() => branches.find((b) => b.id === selectedBranchId), [branches, selectedBranchId]);

   const update = <K extends keyof BookingDraft>(k: K, v: BookingDraft[K]) => setDraft((d) => ({ ...d, [k]: v }));

   const create = () => {
     const name = draft.name.trim();
     const phone = draft.phone.trim();
     const date = draft.date;
+    const pickedTime = customTime || selectedSlot;

     if (!name) return onToast("Thi·∫øu th√¥ng tin", "Vui l√≤ng nh·∫≠p h·ªç v√† t√™n.");
     if (!isValidPhone(phone)) return onToast("S·ªë ƒëi·ªán tho·∫°i ch∆∞a ƒë√∫ng", "Vui l√≤ng nh·∫≠p s·ªë b·∫Øt ƒë·∫ßu b·∫±ng 0 v√† ƒë·ªß 10‚Äì11 s·ªë.");
     if (!date) return onToast("Thi·∫øu ng√†y", "Vui l√≤ng ch·ªçn ng√†y.");
-    if (!svc) return onToast("Thi·∫øu d·ªãch v·ª•", "Vui l√≤ng ch·ªçn d·ªãch v·ª•.");
+    if (!svc) return onToast("Thi·∫øu d·ªãch v·ª•", "Vui l√≤ng ch·ªçn d·ªãch v·ª• tr∆∞·ªõc.");
     if (!branchPick) return onToast("Thi·∫øu chi nh√°nh", "Vui l√≤ng ch·ªçn chi nh√°nh.");
-    if (!selectedSlot) return onToast("Ch∆∞a ch·ªçn gi·ªù", "Vui l√≤ng ch·ªçn m·ªôt khung gi·ªù.");
+    if (!pickedTime) return onToast("Ch∆∞a ch·ªçn gi·ªù", "Vui l√≤ng ch·ªçn khung gi·ªù ho·∫∑c nh·∫≠p gi·ªù t√πy ch·ªçn.");

     const booking: Booking = {
       id: uid("BK"),
       createdAt: new Date().toISOString(),
       name,
       phone,
       email: draft.email.trim(),
-      notify: draft.notify,
-      serviceId: svc?.id,
-      serviceName: svc?.name,
-      duration: svc?.duration,
-      price: svc?.price,
-      staffId: staffPick?.id || null,
-      staffName: staffPick?.name || "H·ªá th·ªëng ph√¢n b·ªï",
-      branchId: branchPick?.id,
-      branchName: branchPick?.name,
+      notify: "email",
+      serviceId: svc.id,
+      serviceName: svc.name,
+      duration: svc.duration,
+      price: svc.price,
+      staffId: null,
+      staffName: "H·ªá th·ªëng ph√¢n b·ªï",
+      branchId: branchPick.id,
+      branchName: branchPick.name,
       date,
-      time: selectedSlot,
+      time: pickedTime,
       note: draft.note.trim(),
       status: "confirmed",
     };

     onCreate(booking);
     onToast("T·∫°o l·ªãch h·∫πn th√†nh c√¥ng", `M√£: ${booking.id} ‚Ä¢ ${booking.date} ${booking.time}`);
   };

   return (
     <div className="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
       <div className="flex items-start justify-between gap-3">
         <div>
           <div className="text-xs font-extrabold text-slate-500">Form ƒë·∫∑t l·ªãch</div>
           <div className="text-2xl font-extrabold">Th√¥ng tin & l·ª±a ch·ªçn</div>
           <div className="mt-1 text-sm text-slate-600">B·∫°n c√≥ th·ªÉ ƒë·∫∑t cho b·∫£n th√¢n ho·∫∑c ng∆∞·ªùi th√¢n.</div>
         </div>
         <span className="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-extrabold">
           üîí B·∫£o m·∫≠t
         </span>
       </div>

       <div className="mt-5 grid gap-4 md:grid-cols-2">
         <div>
           <label className="text-sm font-extrabold text-slate-700">H·ªç v√† t√™n *</label>
-          <input
-            className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            placeholder="V√≠ d·ª•: L√™ Hi·∫øu"
-            value={draft.name}
-            onChange={(e) => update("name", e.target.value)}
-          />
+          <input className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100" placeholder="V√≠ d·ª•: L√™ Hi·∫øu" value={draft.name} onChange={(e) => update("name", e.target.value)} />
         </div>
         <div>
           <label className="text-sm font-extrabold text-slate-700">S·ªë ƒëi·ªán tho·∫°i *</label>
-          <input
-            className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            placeholder="09xx xxx xxx"
-            value={draft.phone}
-            onChange={(e) => update("phone", e.target.value)}
-          />
+          <input className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100" placeholder="09xx xxx xxx" value={draft.phone} onChange={(e) => update("phone", e.target.value)} />
         </div>

         <div>
           <label className="text-sm font-extrabold text-slate-700">Email (tu·ª≥ ch·ªçn)</label>
-          <input
-            className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            placeholder="email@example.com"
-            value={draft.email}
-            onChange={(e) => update("email", e.target.value)}
-          />
-        </div>
-        <div>
-          <label className="text-sm font-extrabold text-slate-700">K√™nh nh·∫Øc l·ªãch</label>
-          <select
-            className="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            value={draft.notify}
-            onChange={(e) => update("notify", e.target.value as any)}
-          >
-            <option value="zalo">Zalo</option>
-            <option value="sms">SMS</option>
-            <option value="email">Email</option>
-          </select>
+          <input className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100" placeholder="email@example.com" value={draft.email} onChange={(e) => update("email", e.target.value)} />
         </div>

         <div>
           <label className="text-sm font-extrabold text-slate-700">D·ªãch v·ª• *</label>
           <select
             className="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            value={draft.serviceId}
-            onChange={(e) => update("serviceId", e.target.value)}
+            value={selectedServiceId}
+            onChange={(e) => onServiceChange(e.target.value)}
           >
             {services.map((s) => (
               <option key={s.id} value={s.id}>
                 {s.name} ‚Ä¢ {s.duration} ph√∫t ‚Ä¢ {money(s.price)}
               </option>
             ))}
           </select>
         </div>

-        <div>
-          <label className="text-sm font-extrabold text-slate-700">Chuy√™n vi√™n</label>
-          <select
-            className="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            value={draft.staffId}
-            onChange={(e) => update("staffId", e.target.value)}
-          >
-            <option value="">Kh√¥ng ch·ªçn (h·ªá th·ªëng ph√¢n b·ªï)</option>
-            {staff.map((s) => (
-              <option key={s.id} value={s.id}>
-                {s.name} ‚Ä¢ {s.level}
-              </option>
-            ))}
-          </select>
-        </div>
-
         <div>
           <label className="text-sm font-extrabold text-slate-700">Chi nh√°nh *</label>
           <select
             className="mt-2 w-full rounded-2xl border border-slate-200 bg-white px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            value={draft.branchId}
-            onChange={(e) => update("branchId", e.target.value)}
+            value={selectedBranchId}
+            disabled={!selectedServiceId || !branches.length}
+            onChange={(e) => onBranchChange(e.target.value)}
           >
             {branches.map((b) => (
               <option key={b.id} value={b.id}>
                 {b.name}
               </option>
             ))}
           </select>
         </div>

         <div>
           <label className="text-sm font-extrabold text-slate-700">Ng√†y *</label>
           <input
             type="date"
             className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
             value={draft.date}
-            onChange={(e) => update("date", e.target.value)}
+            onChange={(e) => {
+              update("date", e.target.value);
+              onDateChange(e.target.value);
+            }}
           />
         </div>

-        <div className="md:col-span-2">
-          <label className="text-sm font-extrabold text-slate-700">Ghi ch√∫</label>
-          <textarea
-            rows={3}
+        <div>
+          <label className="text-sm font-extrabold text-slate-700">Gi·ªù t·ª± ch·ªçn (tu·ª≥ ch·ªçn)</label>
+          <input
+            type="time"
             className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100"
-            placeholder="T√¨nh tr·∫°ng da, nhu c·∫ßu‚Ä¶"
-            value={draft.note}
-            onChange={(e) => update("note", e.target.value)}
+            value={customTime}
+            onChange={(e) => onCustomTime(e.target.value)}
           />
         </div>
+
+        <div className="md:col-span-2">
+          <label className="text-sm font-extrabold text-slate-700">Ghi ch√∫</label>
+          <textarea rows={3} className="mt-2 w-full rounded-2xl border border-slate-200 px-4 py-3 outline-none focus:ring-4 focus:ring-indigo-100" placeholder="T√¨nh tr·∫°ng da, nhu c·∫ßu‚Ä¶" value={draft.note} onChange={(e) => update("note", e.target.value)} />
+        </div>
       </div>

       <div className="mt-4 rounded-3xl bg-slate-50 p-4 ring-1 ring-slate-200">
-        <div className="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
-          <div className="text-sm text-slate-700">
-            Khung gi·ªù ƒë√£ ch·ªçn: <b>{selectedSlot || "Ch∆∞a ch·ªçn"}</b>
-            <span className="text-slate-500"> ‚Ä¢ D·ª± ki·∫øn: </span>
-            <b>{svc ? `${svc.duration} ph√∫t` : "‚Äî"}</b>
-          </div>
-
-          <div className="flex gap-2">
-            <button
-              type="button"
-              className="rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-extrabold hover:bg-slate-50"
-              onClick={() => {
-                // parent will bump reset signal; this is just a hint
-                onToast("Reset", "B·∫•m Reset ·ªü page ƒë·ªÉ l√†m s·∫°ch to√†n b·ªô.");
-              }}
-            >
-              Reset
-            </button>
+        <div className="text-sm text-slate-700">
+          Khung gi·ªù ƒë√£ ch·ªçn: <b>{customTime || selectedSlot || "Ch∆∞a ch·ªçn"}</b>
+          <span className="text-slate-500"> ‚Ä¢ D·ª± ki·∫øn: </span>
+          <b>{svc ? `${svc.duration} ph√∫t` : "‚Äî"}</b>
+        </div>

-            <button
-              type="button"
-              className="rounded-2xl bg-gradient-to-br from-indigo-600 to-violet-600 px-4 py-3 text-sm font-extrabold text-white ring-1 ring-indigo-200 hover:opacity-95"
-              onClick={create}
-            >
-              ‚ûï T·∫°o l·ªãch h·∫πn
-            </button>
-          </div>
+        <div className="mt-3 flex gap-2">
+          <button type="button" className="rounded-2xl bg-gradient-to-br from-indigo-600 to-violet-600 px-4 py-3 text-sm font-extrabold text-white ring-1 ring-indigo-200 hover:opacity-95" onClick={create}>
+            ‚ûï T·∫°o l·ªãch h·∫πn
+          </button>
         </div>

         <div className="mt-2 text-sm text-slate-600">
-          Gi√° tham kh·∫£o: <b>{svc ? money(svc.price) : "‚Äî"}</b>{" "}
-          <span className="text-slate-500">‚Ä¢ C√≥ th·ªÉ thay ƒë·ªïi theo t√¨nh tr·∫°ng/ li·ªáu tr√¨nh.</span>
+          Gi√° tham kh·∫£o: <b>{svc ? money(svc.price) : "‚Äî"}</b> <span className="text-slate-500">‚Ä¢ C√≥ th·ªÉ thay ƒë·ªïi theo t√¨nh tr·∫°ng/ li·ªáu tr√¨nh.</span>
         </div>
       </div>
     </div>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/components/booking/BookingHero.tsx b/Home/ayanavita-fontend-final/src/components/booking/BookingHero.tsx
index 8896ed33601915da9cd07ee1ad6355063efe5039..3f03990f020434fcbdb6a6478b2bddb899e4ea9d 100644
--- a/Home/ayanavita-fontend-final/src/components/booking/BookingHero.tsx
+++ b/Home/ayanavita-fontend-final/src/components/booking/BookingHero.tsx
@@ -1,93 +1,84 @@
 // src/components/booking/BookingHero.tsx
 import React from "react";

 export function BookingHero({
   onFillDemo,
   onScrollForm,
-  onViewMyBookings,
 }: {
   onFillDemo: () => void;
   onScrollForm: () => void;
-  onViewMyBookings: () => void;
 }) {
   return (
     <section className="overflow-hidden rounded-3xl border border-slate-200 bg-white shadow-sm">
       <div className="grid lg:grid-cols-2">
         <div className="p-6 lg:p-8">
           <div className="inline-flex items-center gap-2">
             <span className="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-extrabold">
               üìÖ Booking
             </span>
             <span className="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-extrabold">
               üíõ T∆∞ v·∫•n mi·ªÖn ph√≠
             </span>
           </div>

           <h1 className="mt-4 text-3xl font-extrabold leading-tight md:text-4xl">
             ƒê·∫∑t l·ªãch chƒÉm s√≥c s·∫Øc ƒë·∫πp & s·ª©c kho·∫ª t·∫°i AYANAVITA
           </h1>
           <p className="mt-3 text-slate-600">
-            Ch·ªçn d·ªãch v·ª•, chi nh√°nh, ng√†y gi·ªù v√† chuy√™n vi√™n. H·ªá th·ªëng demo s·∫Ω t·∫°o ‚Äúphi·∫øu ƒë·∫∑t l·ªãch‚Äù v√† l∆∞u v√†o localStorage.
+            Ch·ªçn d·ªãch v·ª•, chi nh√°nh, ng√†y gi·ªù ph√π h·ª£p. H·ªá th·ªëng s·∫Ω ki·ªÉm tra slot theo nƒÉng l·ª±c ph·ª•c v·ª• th·ª±c t·∫ø t·ª´ backend.
           </p>

           <div className="mt-5 grid gap-3 sm:grid-cols-3">
             {[
               ["Cam k·∫øt", "Chu·∫©n quy tr√¨nh", "ƒê√†o t·∫°o b√†i b·∫£n, ƒë·ªìng nh·∫•t th∆∞∆°ng hi·ªáu."],
               ["Th·ªùi gian", "Linh ho·∫°t", "Khung gi·ªù ƒëa d·∫°ng, ∆∞u ti√™n kh√°ch ƒë·∫∑t tr∆∞·ªõc."],
               ["H·ªó tr·ª£", "Nhanh ch√≥ng", "Hotline + Zalo + t∆∞ v·∫•n t·∫°i ch·ªó."],
             ].map(([k, t, d]) => (
               <div key={k} className="rounded-3xl bg-slate-50 p-4 ring-1 ring-slate-200">
                 <div className="text-xs font-extrabold text-slate-500">{k}</div>
                 <div className="mt-1 font-extrabold">{t}</div>
                 <div className="mt-1 text-sm text-slate-600">{d}</div>
               </div>
             ))}
           </div>

           <div className="mt-5 flex flex-wrap gap-2">
             <button
               type="button"
               onClick={onFillDemo}
               className="rounded-2xl bg-gradient-to-br from-amber-400 to-yellow-300 px-4 py-3 text-sm font-extrabold text-slate-900 ring-1 ring-amber-200 hover:opacity-95"
             >
               ‚ú® ƒêi·ªÅn demo
             </button>
             <button
               type="button"
               onClick={onScrollForm}
               className="rounded-2xl bg-gradient-to-br from-indigo-600 to-violet-600 px-4 py-3 text-sm font-extrabold text-white ring-1 ring-indigo-200 hover:opacity-95"
             >
               üìù ƒê·∫∑t l·ªãch ngay
             </button>
-            <button
-              type="button"
-              onClick={onViewMyBookings}
-              className="rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-extrabold hover:bg-slate-50"
-            >
-              üìã Xem l·ªãch c·ªßa t√¥i
-            </button>
           </div>
         </div>

         {/* right illustration */}
         <div className="bg-gradient-to-br from-indigo-600 to-violet-600 p-6 text-white lg:p-8">
           <div className="flex items-center justify-between">
             <div className="text-sm font-extrabold opacity-90">H√¨nh minh ho·∫° (SVG)</div>
             <span className="inline-flex items-center gap-2 rounded-full border border-white/20 bg-white/10 px-3 py-1 text-xs font-extrabold">
               ‚òÖ 4.9/5
             </span>
           </div>

           <div className="mt-4 rounded-3xl bg-white/10 p-4 ring-1 ring-white/20">
             <svg viewBox="0 0 800 420" className="h-auto w-full">
               <defs>
                 <linearGradient id="g1" x1="0" x2="1">
                   <stop offset="0" stopColor="#FBBF24" />
                   <stop offset="1" stopColor="#F59E0B" />
                 </linearGradient>
                 <linearGradient id="g2" x1="0" x2="1">
                   <stop offset="0" stopColor="#A78BFA" />
                   <stop offset="1" stopColor="#4F46E5" />
                 </linearGradient>
               </defs>
               <rect x="20" y="20" width="760" height="380" rx="28" fill="rgba(255,255,255,.12)" stroke="rgba(255,255,255,.25)" />
diff --git a/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx b/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx
index 5b9ba711c0d6c793c491a4a48f7569c85b635e18..b3d45c3f4b14f339674121215a5f19d54cba56a6 100644
--- a/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx
+++ b/Home/ayanavita-fontend-final/src/components/booking/SlotPicker.tsx
@@ -1,64 +1,61 @@
 // src/components/booking/SlotPicker.tsx
 import React from "react";
 import type { Slot } from "../../services/useBookingSlots";

 export function SlotPicker({
   slots,
   selected,
   onPick,
   onRefresh,
+  loading,
+  durationMin,
+  capacity,
 }: {
   slots: Slot[];
   selected: string | null;
   onPick: (t: string) => void;
   onRefresh: () => void;
+  loading?: boolean;
+  durationMin?: number;
+  capacity?: number;
 }) {
   return (
     <aside className="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
       <div className="flex items-start justify-between">
         <div>
-          <div className="text-xs font-extrabold text-slate-500">Khung gi·ªù</div>
+          <div className="text-xs font-extrabold text-slate-500">Khung gi·ªù g·ª£i √Ω</div>
           <div className="text-xl font-extrabold">Ch·ªçn gi·ªù ph√π h·ª£p</div>
+          <div className="mt-1 text-xs text-slate-500">{durationMin ? `M·ªói slot ${durationMin} ph√∫t` : "Ch·ªçn chi nh√°nh + d·ªãch v·ª• + ng√†y"}{capacity ? ` ‚Ä¢ NƒÉng l·ª±c: ${capacity} slot ƒë·ªìng th·ªùi` : ""}</div>
         </div>
-        <button
-          className="rounded-2xl bg-gradient-to-br from-amber-400 to-yellow-300 px-4 py-2 text-sm font-extrabold text-slate-900 ring-1 ring-amber-200 hover:opacity-95"
-          onClick={onRefresh}
-          type="button"
-        >
+        <button className="rounded-2xl bg-gradient-to-br from-amber-400 to-yellow-300 px-4 py-2 text-sm font-extrabold text-slate-900 ring-1 ring-amber-200 hover:opacity-95" onClick={onRefresh} type="button">
           ‚Üª L√†m m·ªõi
         </button>
       </div>

-      <div className="mt-4 grid gap-2">
+      {loading ? <div className="mt-4 text-sm text-slate-500">ƒêang t·∫£i khung gi·ªù...</div> : null}
+
+      <div className="mt-4 grid grid-cols-3 gap-2">
         {slots.map((s) => {
           const disabled = !s.available;
           const active = selected === s.t;
           return (
             <button
               key={s.t}
               type="button"
               disabled={disabled}
               onClick={() => onPick(s.t)}
               className={[
-                "flex w-full items-center justify-between rounded-3xl p-3 text-left ring-1 ring-slate-200",
+                "aspect-square rounded-2xl p-2 text-center ring-1 ring-slate-200",
                 disabled ? "cursor-not-allowed bg-slate-100 opacity-60" : "bg-white hover:bg-slate-50",
                 active ? "ring-2 ring-indigo-500" : "",
               ].join(" ")}
             >
-              <div className="flex items-center gap-2">
-                <span className="text-slate-500">{disabled ? "‚õî" : "‚óã"}</span>
-                <div>
-                  <div className="font-extrabold">{s.t}</div>
-                  <div className="text-xs text-slate-500">{disabled ? "H·∫øt ch·ªó" : "C√≤n ch·ªó"}</div>
-                </div>
-              </div>
-              <span className="inline-flex items-center gap-2 rounded-full border border-slate-200 bg-white px-3 py-1 text-xs font-extrabold">
-                üïí Slot
-              </span>
+              <div className="text-sm font-extrabold">{s.t}</div>
+              <div className="mt-1 text-[11px] text-slate-500">{disabled ? "H·∫øt ch·ªó" : "C√≤n ch·ªó"}</div>
             </button>
           );
         })}
       </div>
     </aside>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx b/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx
index 5fa74fbe724604a5ceca91af69af4a47a1620506..80fde5a2cb5b6cc20b21a08a927acb05d64deb69 100644
--- a/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx
+++ b/Home/ayanavita-fontend-final/src/pages/BookingPage.tsx
@@ -1,185 +1,248 @@
 // src/pages/BookingPage.tsx
 import React from "react";
+import { useSearchParams } from "react-router-dom";
 import { BookingHeader } from "../components/booking/BookingHeader";
 import { BookingHero } from "../components/booking/BookingHero";
 import { BookingForm } from "../components/booking/BookingForm";
 import { SlotPicker } from "../components/booking/SlotPicker";
-import { MyBookings } from "../components/booking/MyBookings";
 import { TrustSection } from "../components/booking/TrustSection";
-import { BookingFooter } from "../components/booking/BookingFooter";
 import { AuthModal } from "../components/booking/AuthModal";
 import { PolicyModal } from "../components/booking/PolicyModal";
 import { ToastStack } from "../components/booking/ToastStack";

-import { useBookingCatalog } from "../services/booking.demo";
+import { bookingApi } from "../api/booking.api";
 import { http } from "../api/http";
 import { useToast } from "../services/useToast";
 import { useBookingSlots } from "../services/useBookingSlots";
-import { useBookings } from "../services/useBookings";
 import { getAuth, setAuth, type AuthUser } from "../services/auth.storage";
-import type { BookingStatus } from "../services/booking.storage";
 import { Footer } from "../components/layout/Footer";

+type Opt = { id: string; name: string; duration?: number; price?: number; address?: string };
+
 export default function BookingPage() {
+  const [searchParams] = useSearchParams();
+  const preselectedService = searchParams.get("serviceId") || "";
+
   const { items: toasts, push: toast, remove } = useToast();
   const slots = useBookingSlots();
-  const bookings = useBookings();
-  const catalog = useBookingCatalog();
+
+  const [services, setServices] = React.useState<Opt[]>([]);
+  const [branches, setBranches] = React.useState<Opt[]>([]);
+  const [loadingCatalog, setLoadingCatalog] = React.useState(true);
+
+  const [serviceId, setServiceId] = React.useState<string>("");
+  const [branchId, setBranchId] = React.useState<string>("");
+  const [date, setDate] = React.useState<string>(new Date(Date.now() + 86400000).toISOString().slice(0, 10));
+  const [customTime, setCustomTime] = React.useState("");

   const [authOpen, setAuthOpen] = React.useState(false);
   const [policyOpen, setPolicyOpen] = React.useState(false);
   const [user, setUser] = React.useState<AuthUser | null>(() => {
     try {
       return getAuth();
     } catch {
       return null;
     }
   });

   const [resetSignal, setResetSignal] = React.useState(0);
-
   const formRef = React.useRef<HTMLDivElement | null>(null);
-
   const userLabel = user ? user.name : "ƒêƒÉng nh·∫≠p";

+  const refreshSlots = React.useCallback(async (sid: string, bid: string, d: string) => {
+    await slots.refresh({
+      serviceId: sid ? Number(sid) : undefined,
+      branchId: bid ? Number(bid) : undefined,
+      date: d,
+    });
+  }, [slots.refresh]);
+
+  const normalizeServices = React.useCallback(
+    (input: any[]) => input.map((s: any) => ({ id: String(s.id), name: s.name, duration: Number(s.durationMin || 0), price: Number(s.price || 0) })),
+    [],
+  );
+
+  const normalizeBranches = React.useCallback(
+    (input: any[]) => input.map((b: any) => ({ id: String(b.id), name: b.name, address: b.address })),
+    [],
+  );
+
+  const bootstrapCatalog = React.useCallback(async () => {
+    setLoadingCatalog(true);
+    try {
+      const serviceRows = await bookingApi.services();
+      const normalizedServices = normalizeServices(serviceRows);
+      setServices(normalizedServices);
+
+      const preferred = normalizedServices.find((s) => s.id === preselectedService)?.id;
+      const nextService = preferred || normalizedServices[0]?.id || "";
+      setServiceId(nextService);
+
+      const branchRows = nextService ? await bookingApi.branches({ serviceId: Number(nextService) }) : [];
+      const normalizedBranches = normalizeBranches(branchRows);
+      setBranches(normalizedBranches);
+
+      const nextBranch = normalizedBranches[0]?.id || "";
+      setBranchId(nextBranch);
+
+      await refreshSlots(nextService, nextBranch, date);
+    } catch {
+      toast("Kh√¥ng t·∫£i ƒë∆∞·ª£c d·ªØ li·ªáu", "Vui l√≤ng ki·ªÉm tra backend (localhost:8090).");
+    } finally {
+      setLoadingCatalog(false);
+    }
+  }, [date, normalizeBranches, normalizeServices, preselectedService, refreshSlots, toast]);
+
+  React.useEffect(() => {
+    bootstrapCatalog();
+  }, [bootstrapCatalog]);
+
+  const onBranchChange = async (nextBranch: string) => {
+    setBranchId(nextBranch);
+    setCustomTime("");
+    slots.clearPick();
+    await refreshSlots(serviceId, nextBranch, date);
+  };
+
+  const onServiceChange = async (nextService: string) => {
+    setServiceId(nextService);
+    setCustomTime("");
+    slots.clearPick();
+    try {
+      const branchRows = await bookingApi.branches(nextService ? { serviceId: Number(nextService) } : undefined);
+      const normalizedBranches = normalizeBranches(branchRows);
+      setBranches(normalizedBranches);
+      const nextBranch = normalizedBranches[0]?.id || "";
+      setBranchId(nextBranch);
+      await refreshSlots(nextService, nextBranch, date);
+    } catch {
+      toast("Kh√¥ng t·∫£i ƒë∆∞·ª£c chi nh√°nh theo d·ªãch v·ª•");
+    }
+  };
+
+  const onDateChange = async (nextDate: string) => {
+    setDate(nextDate);
+    setCustomTime("");
+    slots.clearPick();
+    await refreshSlots(serviceId, branchId, nextDate);
+  };
+
   const onAuthClick = () => {
     if (user) {
       if (confirm("B·∫°n mu·ªën ƒëƒÉng xu·∫•t?")) {
         setAuth(null);
         setUser(null);
         toast("ƒê√£ ƒëƒÉng xu·∫•t");
       }
       return;
     }
     setAuthOpen(true);
   };

   const fillDemo = () => {
-    // demo fill via reset signal and user name propagated to BookingForm
     if (!user) {
       const demoUser: AuthUser = { email: "demo@ayanavita.vn", name: "Kh√°ch Demo", remember: false };
       setUser(demoUser);
     }
     toast("ƒê√£ ƒëi·ªÅn demo", "H√£y ch·ªçn khung gi·ªù v√† t·∫°o l·ªãch h·∫πn.");
   };

   const scrollToForm = () => {
     formRef.current?.scrollIntoView({ behavior: "smooth", block: "start" });
   };

-  const viewMyBookings = () => {
-    window.scrollTo({ top: document.body.scrollHeight, behavior: "smooth" });
-    toast("L·ªãch c·ªßa t√¥i", "Xem ph·∫ßn sidebar b√™n ph·∫£i.");
-  };
-
-  const resetAll = () => {
+  const resetAll = async () => {
     setResetSignal((x) => x + 1);
-    slots.refresh();
-    bookings.reload();
+    setCustomTime("");
+    slots.clearPick();
+    await bootstrapCatalog();
     toast("ƒê√£ reset", "B·∫°n c√≥ th·ªÉ ƒë·∫∑t l·ªãch l·∫°i.");
   };

-  const clearBookings = () => {
-    if (!confirm("X√≥a to√†n b·ªô l·ªãch h·∫πn (demo)?")) return;
-    bookings.clearAll();
-    toast("ƒê√£ x√≥a l·ªãch h·∫πn", "LocalStorage ƒë√£ ƒë∆∞·ª£c l√†m s·∫°ch.");
-  };
-
-  const setStatus = (id: string, status: BookingStatus) => {
-    bookings.setStatus(id, status);
-    toast("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i", `${id} ‚Ä¢ ${status}`);
-  };
-
   return (
     <div className="min-h-screen bg-slate-50 text-slate-900">
-      <BookingHeader
-        userLabel={userLabel}
-        onHotline={() => toast("Hotline", "G·ªçi 0900 000 000 (demo).")}
-        onAuthClick={onAuthClick}
-      />
+      <BookingHeader userLabel={userLabel} onHotline={() => toast("Hotline", "G·ªçi 0900 000 000 (demo)." )} onAuthClick={onAuthClick} />

       <main className="mx-auto max-w-7xl px-4 py-6">
-        <BookingHero onFillDemo={fillDemo} onScrollForm={scrollToForm} onViewMyBookings={viewMyBookings} />
+        <BookingHero onFillDemo={fillDemo} onScrollForm={scrollToForm} />

         <section id="form" className="mt-5 grid gap-4 lg:grid-cols-3" ref={formRef}>
           <div className="lg:col-span-2 space-y-4">
             <BookingForm
-              services={catalog.services}
-              staff={catalog.staff}
-              branches={catalog.branches}
+              services={services as any}
+              branches={branches as any}
+              selectedServiceId={serviceId}
+              selectedBranchId={branchId}
               selectedSlot={slots.selectedSlot}
+              customTime={customTime}
+              onCustomTime={(v) => {
+                setCustomTime(v);
+                if (v) slots.clearPick();
+              }}
               onToast={toast}
               onCreate={async (b) => {
-                bookings.add(b);
                 try {
                   await http.post("/booking/appointments", {
                     customerName: b.name,
                     customerPhone: b.phone,
                     customerEmail: b.email || undefined,
                     appointmentAt: `${b.date}T${b.time}:00`,
                     note: b.note || undefined,
                     branchId: Number(b.branchId),
                     serviceId: Number(b.serviceId),
-                    specialistId: b.staffId ? Number(b.staffId) : undefined,
                   });
-                } catch {
-                  toast("L∆∞u DB ch∆∞a th√†nh c√¥ng", "Vui l√≤ng ki·ªÉm tra backend (localhost:8090).");
+                  toast("T·∫°o l·ªãch h·∫πn th√†nh c√¥ng", `${b.date} ${b.time}`);
+                  await refreshSlots(serviceId, branchId, date);
+                } catch (error: any) {
+                  toast("Kh√¥ng th·ªÉ t·∫°o l·ªãch", error?.response?.data?.message || "Khung gi·ªù c√≥ th·ªÉ ƒë√£ h·∫øt ch·ªó.");
                 }
               }}
               onResetSignal={resetSignal}
               initialName={user?.name || ""}
+              onServiceChange={onServiceChange}
+              onBranchChange={onBranchChange}
+              onDateChange={onDateChange}
             />
-            {catalog.loading && <div className="text-sm text-slate-500">ƒêang t·∫£i d·ªØ li·ªáu d·ªãch v·ª• t·ª´ API...</div>}
+            {loadingCatalog && <div className="text-sm text-slate-500">ƒêang t·∫£i d·ªØ li·ªáu d·ªãch v·ª• t·ª´ API...</div>}

             <div className="rounded-3xl border border-slate-200 bg-slate-50 p-4 ring-1 ring-slate-200">
               <div className="flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
                 <div className="text-sm text-slate-700">
-                  Khung gi·ªù ƒë√£ ch·ªçn: <b>{slots.selectedSlot || "Ch∆∞a ch·ªçn"}</b>
+                  Khung gi·ªù ƒë√£ ch·ªçn: <b>{customTime || slots.selectedSlot || "Ch∆∞a ch·ªçn"}</b>
                   <span className="text-slate-500"> ‚Ä¢ </span>
                   <button className="font-extrabold text-indigo-600 hover:underline" onClick={resetAll} type="button">
                     Reset to√†n b·ªô
                   </button>
                 </div>
               </div>
-              <div className="mt-2 text-sm text-slate-600">
-                Tip: b·∫•m ‚ÄúL√†m m·ªõi‚Äù ·ªü khung gi·ªù ƒë·ªÉ random available/unavailable (demo).
-              </div>
+              <div className="mt-2 text-sm text-slate-600">Slot ƒë∆∞·ª£c backend t√≠nh theo s·ªë chuy√™n vi√™n ph·ª•c v·ª• ƒë∆∞·ª£c d·ªãch v·ª• ·ªü chi nh√°nh ƒë√£ ch·ªçn.</div>
             </div>
           </div>

           <div className="space-y-4">
             <SlotPicker
               slots={slots.slots}
               selected={slots.selectedSlot}
-              onPick={(t) => slots.pick(t)}
-              onRefresh={() => {
-                slots.refresh();
-                toast("ƒê√£ l√†m m·ªõi slot", "M·ªôt s·ªë khung gi·ªù c√≥ th·ªÉ h·∫øt ch·ªó (demo).");
+              loading={slots.loading}
+              durationMin={slots.durationMin}
+              capacity={slots.capacity}
+              onPick={(t) => {
+                setCustomTime("");
+                slots.pick(t);
               }}
+              onRefresh={() => refreshSlots(serviceId, branchId, date)}
             />
-
-            <div className="rounded-3xl border border-slate-200 bg-white p-6 shadow-sm">
-              <MyBookings list={bookings.list} onSetStatus={setStatus} onClear={clearBookings} />
-            </div>
           </div>
         </section>

         <TrustSection onPolicy={() => setPolicyOpen(true)} />
       </main>

-      <Footer
-      />
-
-      <AuthModal
-        open={authOpen}
-        onClose={() => setAuthOpen(false)}
-        toast={toast}
-        onAuthed={(u) => setUser(u)}
-      />
+      <Footer />

+      <AuthModal open={authOpen} onClose={() => setAuthOpen(false)} toast={toast} onAuthed={(u) => setUser(u)} />
       <PolicyModal open={policyOpen} onClose={() => setPolicyOpen(false)} />
-
       <ToastStack items={toasts} onClose={remove} />
     </div>
   );
 }
diff --git a/Home/ayanavita-fontend-final/src/pages/ServiceDetailPage.tsx b/Home/ayanavita-fontend-final/src/pages/ServiceDetailPage.tsx
index 4803c6806360a36162314149ba5fd6320fc6d37f..3f17a1c966c02e9423613a9745587a7e75332e94 100644
--- a/Home/ayanavita-fontend-final/src/pages/ServiceDetailPage.tsx
+++ b/Home/ayanavita-fontend-final/src/pages/ServiceDetailPage.tsx
@@ -170,51 +170,51 @@ export default function ServiceDetailPage() {
                   <img
                     className="h-64 w-full object-cover"
                     alt="detail"
                     src={service.imageUrl || "https://images.unsplash.com/photo-1540555700478-4be289fbecef?auto=format&fit=crop&w=1600&q=70"}
                   />
                   <div className="absolute inset-0 bg-gradient-to-r from-slate-950/55 to-indigo-700/10" />
                   <div className="absolute inset-0 p-6 flex flex-col justify-end">
                     <div className="text-xs font-extrabold text-white/80">Chi ti·∫øt d·ªãch v·ª•</div>
                     <h1 className="text-2xl md:text-3xl font-extrabold text-white">
                       {service.name} (#{service.id})
                     </h1>
                     <div className="mt-2 flex gap-2 flex-wrap">
                       <span className="chip"><i className="fa-solid fa-clock text-indigo-600" />{service.durationMin} ph√∫t</span>
                       <span className="chip">
                         <i className="fa-solid fa-star star" />
                         {service.ratingAvg.toFixed(1)} ({new Intl.NumberFormat("vi-VN").format(service.bookedCount)} l∆∞·ª£t)
                       </span>
                     </div>
                   </div>
                 </div>

                 <div className="p-5 grid gap-4 md:grid-cols-3">
                   <div className="card p-4">
                     <div className="text-xs font-extrabold text-slate-500">Gi√° ni√™m y·∫øt</div>
                     <div className="text-2xl font-extrabold mt-1">{money(service.price)}</div>
-                    <Link to="/booking" className="btn btn-primary w-full mt-3"><i className="fa-solid fa-calendar-check" />ƒê·∫∑t l·ªãch</Link>
+                    <Link to={`/booking?serviceId=${service.id}`} className="btn btn-primary w-full mt-3"><i className="fa-solid fa-calendar-check" />ƒê·∫∑t l·ªãch</Link>
                     <Link to="/services" className="btn w-full mt-2"><i className="fa-solid fa-arrow-left" />Danh s√°ch</Link>
                   </div>

                   <div className="card p-4 md:col-span-2">
                     <div className="font-extrabold">M·ª•c ti√™u &amp; L·ª£i √≠ch</div>
                     <ul className="mt-2 text-sm text-slate-700 space-y-2">
                       {service.goals.length ? service.goals.map((goal, idx) => (
                         <li key={idx} className="flex gap-2"><span className="text-emerald-600 font-extrabold">‚Ä¢</span>{goal}</li>
                       )) : <li>ƒêang c·∫≠p nh·∫≠t.</li>}
                     </ul>
                     {service.description ? <div className="mt-3 text-sm muted">{service.description}</div> : null}
                   </div>
                 </div>

                 <div className="px-5 pb-5 grid gap-4 lg:grid-cols-2">
                   <div className="card p-5">
                     <div className="font-extrabold">Quy tr√¨nh</div>
                     <ol className="mt-3 text-sm text-slate-700 space-y-2">
                       {service.process.length ? service.process.map((p, idx) => (
                         <li key={idx}><b>{idx + 1})</b> {p}</li>
                       )) : <li>ƒêang c·∫≠p nh·∫≠t.</li>}
                     </ol>
                   </div>

                   <div className="card p-5">
diff --git a/Home/ayanavita-fontend-final/src/pages/ServicesPage.tsx b/Home/ayanavita-fontend-final/src/pages/ServicesPage.tsx
index 45a6ffbe04e06089d4907e37c6f4af9bef7f9756..8e79ffb130b44363982cd6a143d3b8022b1d1710 100644
--- a/Home/ayanavita-fontend-final/src/pages/ServicesPage.tsx
+++ b/Home/ayanavita-fontend-final/src/pages/ServicesPage.tsx
@@ -81,51 +81,51 @@ function ServiceCard({ s }: { s: ApiService }) {
             {money(s.price)}
           </span>
         </div>

         <div className="mt-2 text-xs text-slate-500">
           {s.id} ‚Ä¢ {s.duration} ph√∫t
         </div>
       </div>

       <div className="mt-2 flex items-center justify-between text-sm text-slate-700">
         <div className="flex items-center gap-2">
           <Stars rating={s.rating} /> <b>{s.rating.toFixed(1)}</b>
         </div>
         <span className="chip">
           <i className="fa-solid fa-fire text-rose-600" />
           {s.tag}
         </span>
       </div>

       <div className="mt-3 grid grid-cols-2 gap-2">
         <Link className="btn" to={`/services/${s.id}`}>
           <i className="fa-solid fa-circle-info" />
           Chi ti·∫øt
         </Link>

-        <Link className="btn btn-primary" to="/booking">
+        <Link className="btn btn-primary" to={`/booking?serviceId=${s.dbId}`}>
           <i className="fa-solid fa-calendar-check" />
           ƒê·∫∑t
         </Link>
       </div>
     </article>
   );
 }

 export default function ServicesPage() {
   const [authOpen, setAuthOpen] = useState(false);
   const [authTab, setAuthTab] = useState<AuthTab>("login");
   const [success, setSuccess] = useState<{ open: boolean; message: string }>({
     open: false,
     message: "",
   });

   const [loading, setLoading] = useState(true);
   const [services, setServices] = useState<ApiService[]>([]);

   const openAuth = useCallback((tab: AuthTab) => {
     setAuthTab(tab);
     setAuthOpen(true);
   }, []);

   const openSuccess = useCallback((message: string) => {
diff --git a/Home/ayanavita-fontend-final/src/services/useBookingSlots.ts b/Home/ayanavita-fontend-final/src/services/useBookingSlots.ts
index 3881bf59d7fb56b6a8f19d18d3b289b48a6b50ec..8ecf9ebffbf816ca9b338a91c4ab085271a7f220 100644
--- a/Home/ayanavita-fontend-final/src/services/useBookingSlots.ts
+++ b/Home/ayanavita-fontend-final/src/services/useBookingSlots.ts
@@ -1,26 +1,45 @@
 // src/services/useBookingSlots.ts
 import { useCallback, useMemo, useState } from "react";
+import { bookingApi } from "../api/booking.api";

-export type Slot = { t: string; available: boolean };
-
-const BASE = ["09:00", "10:00", "11:00", "13:30", "14:30", "15:30", "16:30", "18:30", "19:30"];
-
-function gen(): Slot[] {
-  return BASE.map((t) => ({ t, available: Math.random() > 0.25 }));
-}
+export type Slot = { t: string; available: boolean; occupied?: number };

 export function useBookingSlots() {
-  const [slots, setSlots] = useState<Slot[]>(() => gen());
+  const [slots, setSlots] = useState<Slot[]>([]);
   const [selected, setSelected] = useState<string | null>(null);
-
-  const refresh = useCallback(() => {
-    setSlots(gen());
-    setSelected(null);
+  const [capacity, setCapacity] = useState(0);
+  const [durationMin, setDurationMin] = useState(0);
+  const [loading, setLoading] = useState(false);
+
+  const refresh = useCallback(async (params?: { branchId?: number; serviceId?: number; date?: string }) => {
+    if (!params?.branchId || !params?.serviceId || !params?.date) {
+      setSlots([]);
+      setCapacity(0);
+      setDurationMin(0);
+      setSelected(null);
+      return;
+    }
+
+    setLoading(true);
+    try {
+      const data = await bookingApi.slotSuggestions({
+        branchId: params.branchId,
+        serviceId: params.serviceId,
+        date: params.date,
+      });
+      const nextSlots = (data?.slots || []).map((s) => ({ t: s.time, available: !!s.available, occupied: s.occupied }));
+      setSlots(nextSlots);
+      setCapacity(Number(data?.capacity || 0));
+      setDurationMin(Number(data?.durationMin || 0));
+      setSelected((prev) => (nextSlots.some((s) => s.t === prev && s.available) ? prev : null));
+    } finally {
+      setLoading(false);
+    }
   }, []);

   const pick = useCallback((t: string) => setSelected(t), []);
-
+  const clearPick = useCallback(() => setSelected(null), []);
   const selectedSlot = useMemo(() => selected, [selected]);

-  return { slots, selectedSlot, pick, refresh, clearPick: () => setSelected(null) };
+  return { slots, selectedSlot, pick, refresh, clearPick, capacity, durationMin, loading };
 }
diff --git a/backend/ayanavitabackend/app/api/prisma/migrations/202602270001_drop_appointment_userid/migration.sql b/backend/ayanavitabackend/app/api/prisma/migrations/202602270001_drop_appointment_userid/migration.sql
new file mode 100644
index 0000000000000000000000000000000000000000..de58a099e1e2c9bffedd1590d61528a9357eb994
--- /dev/null
+++ b/backend/ayanavitabackend/app/api/prisma/migrations/202602270001_drop_appointment_userid/migration.sql
@@ -0,0 +1,8 @@
+-- DropForeignKey
+ALTER TABLE `Appointment` DROP FOREIGN KEY `Appointment_userId_fkey`;
+
+-- DropIndex
+DROP INDEX `Appointment_userId_idx` ON `Appointment`;
+
+-- AlterTable
+ALTER TABLE `Appointment` DROP COLUMN `userId`;
diff --git a/backend/ayanavitabackend/app/api/prisma/schema.prisma b/backend/ayanavitabackend/app/api/prisma/schema.prisma
index 722a4b969e471e108f04bd68336edafb7e882bb1..b72c454394b21806b299ac69c463e5e1d4c56eaa 100644
--- a/backend/ayanavitabackend/app/api/prisma/schema.prisma
+++ b/backend/ayanavitabackend/app/api/prisma/schema.prisma
@@ -6,51 +6,50 @@ datasource db {
   provider          = "mysql"
   url               = env("DATABASE_URL")
   shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
 }

 model User {
   id                 Int      @id @default(autoincrement())
   email              String   @unique
   password           String
   name               String?
   phone              String?
   role               Role     @default(USER)
   isActive           Boolean  @default(true)
   hashedRefreshToken String?  @db.Text
   createdAt          DateTime @default(now())
   updatedAt          DateTime @updatedAt

   // ‚úÖ ADD
   enrollments    Enrollment[]
   lessonProgress LessonProgress[]
   orders         Order[] // <‚Äî opposite for Order.user

   // ‚úÖ CMS (optional relations)
   cmsSectionVersions CmsSectionVersion[]
   mediaAssets        MediaAsset[]
-  appointments       Appointment[]
   serviceReviews     ServiceReview[]
 }

 model Branch {
   id          Int                @id @default(autoincrement())
   code        String             @unique @db.VarChar(32)
   name        String             @db.VarChar(255)
   address     String             @db.VarChar(255)
   phone       String?            @db.VarChar(30)
   isActive    Boolean            @default(true)
   createdAt   DateTime           @default(now())
   updatedAt   DateTime           @updatedAt
   services    BranchService[]
   specialists Specialist[]
   appointments Appointment[]
 }

 model ServiceCategory {
   id        Int      @id @default(autoincrement())
   name      String   @unique @db.VarChar(255)
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
   services  Service[]
 }

@@ -113,80 +112,76 @@ model BranchService {
 model SpecialistBranchService {
   specialistId Int
   branchId     Int
   serviceId    Int
   createdAt    DateTime @default(now())

   specialist Specialist   @relation(fields: [specialistId], references: [id], onDelete: Cascade)
   branchService BranchService @relation(fields: [branchId, serviceId], references: [branchId, serviceId], onDelete: Cascade)

   @@id([specialistId, branchId, serviceId])
   @@index([branchId, serviceId])
 }

 model Appointment {
   id            Int               @id @default(autoincrement())
   code          String            @unique @db.VarChar(40)
   customerName  String            @db.VarChar(255)
   customerPhone String            @db.VarChar(30)
   customerEmail String?           @db.VarChar(255)
   appointmentAt DateTime
   note          String?           @db.Text
   status        AppointmentStatus @default(PENDING)
   branchId      Int
   serviceId     Int
   specialistId  Int?
-  userId        Int?
   createdAt     DateTime          @default(now())
   updatedAt     DateTime          @updatedAt

   branch     Branch      @relation(fields: [branchId], references: [id], onDelete: Restrict)
   service    Service     @relation(fields: [serviceId], references: [id], onDelete: Restrict)
   specialist Specialist? @relation(fields: [specialistId], references: [id], onDelete: SetNull)
-  user       User?       @relation(fields: [userId], references: [id], onDelete: SetNull)

   @@index([branchId, appointmentAt])
   @@index([serviceId])
   @@index([specialistId])
-  @@index([userId])
 }

 model ServiceReview {
   id         Int      @id @default(autoincrement())
   serviceId  Int
   userId     Int?
   stars      Int
   comment    String?  @db.Text
   customerName String? @db.VarChar(255)
   createdAt  DateTime @default(now())
   updatedAt  DateTime @updatedAt

   service Service @relation(fields: [serviceId], references: [id], onDelete: Cascade)
   user    User?   @relation(fields: [userId], references: [id], onDelete: SetNull)

   @@index([serviceId])
-  @@index([userId])
 }


 model RegistrationOtp {
   id        Int      @id @default(autoincrement())
   email     String   @unique
   code      String   @db.VarChar(6)
   expiresAt DateTime
   usedAt    DateTime?
   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
 }

 model Course {
   id          Int      @id @default(autoincrement())
   title       String
   slug        String   @unique
   description String?
   thumbnail   String?
   price       Int      @default(0)
   published   Boolean  @default(false)
   createdAt   DateTime @default(now())
   updatedAt   DateTime @updatedAt

   lessons     Lesson[]
@@ -208,76 +203,74 @@ model Lesson {
   createdAt DateTime         @default(now())
   updatedAt DateTime         @updatedAt
   course    Course           @relation(fields: [courseId], references: [id], onDelete: Cascade)
   progress  LessonProgress[]

   @@unique([courseId, slug])
   @@index([courseId, order])
 }

 model Enrollment {
   id       Int @id @default(autoincrement())
   userId   Int
   courseId Int
   orderId  Int

   createdAt DateTime @default(now())

   status     EnrollmentStatus @default(ACTIVE)
   enrolledAt DateTime         @default(now())
   updatedAt  DateTime         @updatedAt
   user       User             @relation(fields: [userId], references: [id], onDelete: Cascade)
   course     Course           @relation(fields: [courseId], references: [id], onDelete: Restrict)
   order      Order            @relation(fields: [orderId], references: [id], onDelete: Cascade)

   @@unique([userId, courseId])
-  @@index([userId])
   @@index([courseId])
   @@index([orderId])
 }

 model LessonProgress {
   id           Int      @id @default(autoincrement())
   userId       Int
   lessonId     Int
   completed    Boolean  @default(false)
   lastOpenedAt DateTime @default(now())

   // ti·∫øn ƒë·ªô
   status          ProgressStatus @default(IN_PROGRESS)
   percent         Int            @default(0) // 0..100
   lastPositionSec Int            @default(0)
   completedAt     DateTime?

   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt
   lesson    Lesson   @relation(fields: [lessonId], references: [id], onDelete: Cascade)
   user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

   @@unique([userId, lessonId])
   @@index([lessonId])
-  @@index([userId])
 }

 enum ProgressStatus {
   IN_PROGRESS
   COMPLETED
 }

 enum SpecialistLevel {
   JUNIOR
   SENIOR
   EXPERT
   THERAPIST
 }

 enum AppointmentStatus {
   PENDING
   CONFIRMED
   DONE
   CANCELED
 }

 enum Role {
   ADMIN
   MANAGER
   STAFF
@@ -296,51 +289,50 @@ enum OrderStatus {
   CANCELED
   EXPIRED
 }

 model Order {
   id          Int          @id @default(autoincrement())
   code        String       @unique @db.VarChar(32) // m√£ ƒë∆°n
   userId      Int
   status      OrderStatus  @default(PENDING)
   enrollments Enrollment[]

   currency String @default("VND") @db.VarChar(3)
   subtotal Int    @default(0)
   discount Int    @default(0)
   total    Int    @default(0)

   paidAt     DateTime?
   canceledAt DateTime?

   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt

   user  User        @relation(fields: [userId], references: [id], onDelete: Cascade)
   items OrderItem[]

-  @@index([userId])
   @@index([status])
 }

 model OrderItem {
   id       Int @id @default(autoincrement())
   orderId  Int
   courseId Int

   price       Int    @default(0)
   courseTitle String @db.VarChar(255) // snapshot (khuy·∫øn ngh·ªã)

   createdAt DateTime @default(now())
   updatedAt DateTime @updatedAt

   order  Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)
   course Course @relation(fields: [courseId], references: [id], onDelete: Restrict)

   @@unique([orderId, courseId])
   @@index([courseId])
 }

 // ===================== CMS (Landing / Public Pages) =====================

 enum CmsStatus {
   DRAFT
diff --git a/backend/ayanavitabackend/app/api/prisma/seed.ts b/backend/ayanavitabackend/app/api/prisma/seed.ts
index c406d3e97d394f3859f60a1f0eb4293669fb93f0..755ba2be253ca24513478a8b53acfa2578e56a3f 100644
--- a/backend/ayanavitabackend/app/api/prisma/seed.ts
+++ b/backend/ayanavitabackend/app/api/prisma/seed.ts
@@ -176,63 +176,61 @@ async function main() {
             serviceId: service.id,
           },
         },
         update: {},
         create: {
           specialistId: specialist.id,
           branchId: specialist.branchId,
           serviceId: service.id,
         },
       })
     }
   }

   const now = new Date()
   const sampleAppointments = [
     {
       code: 'APM-1001',
       customerName: 'Nguy·ªÖn Thu H√†',
       customerPhone: '0912000111',
       customerEmail: 'thuha@example.com',
       appointmentAt: new Date(now.getTime() + 24 * 60 * 60 * 1000),
       note: 'Da nh·∫°y c·∫£m, c·∫ßn t∆∞ v·∫•n k·ªπ.',
       branchId: branches[0]?.id,
       serviceId: services[0]?.id,
       specialistId: specialists[0]?.id,
-      userId: user.id,
     },
     {
       code: 'APM-1002',
       customerName: 'Tr·∫ßn Minh Anh',
       customerPhone: '0912000222',
       customerEmail: 'minhanh@example.com',
       appointmentAt: new Date(now.getTime() + 2 * 24 * 60 * 60 * 1000),
       note: '∆Øu ti√™n khung gi·ªù chi·ªÅu ü§ó',
       branchId: branches[1]?.id,
       serviceId: services[1]?.id,
       specialistId: specialists[1]?.id,
-      userId: user.id,
     },
   ].filter((item) => item.branchId && item.serviceId)

   for (const a of sampleAppointments) {
     await prisma.appointment.upsert({
       where: { code: a.code },
       update: a,
       create: a,
     })
   }

   const serviceReviewSeeds = [
     { serviceId: services[0]?.id, userId: user.id, stars: 5, comment: 'R·∫•t h√†i l√≤ng üëèüëèüëè', customerName: 'Thu H√†' },
     { serviceId: services[1]?.id, userId: user.id, stars: 4, comment: 'D·ªãch v·ª• t·ªët, nh√¢n vi√™n nhi·ªát t√¨nh ü§ó', customerName: 'Minh Anh' },
     { serviceId: services[2]?.id, userId: null, stars: 5, comment: 'Th∆∞ gi√£n ƒë√∫ng nghƒ©a, s·∫Ω quay l·∫°i!', customerName: 'Kh√°ch l·∫ª' },
   ].filter((r) => r.serviceId)

   for (const review of serviceReviewSeeds) {
     const existing = await prisma.serviceReview.findFirst({
       where: {
         serviceId: review.serviceId,
         customerName: review.customerName ?? undefined,
         comment: review.comment ?? undefined,
       },
     })
diff --git a/backend/ayanavitabackend/app/api/src/booking/booking.controller.ts b/backend/ayanavitabackend/app/api/src/booking/booking.controller.ts
index e7e5cf917eba13cb7b5b02e7afea5dab8f07af0d..2ef1c8274bc503775bcfed66766644f023c66965 100644
--- a/backend/ayanavitabackend/app/api/src/booking/booking.controller.ts
+++ b/backend/ayanavitabackend/app/api/src/booking/booking.controller.ts
@@ -168,53 +168,75 @@ export class BookingController {
   @Delete('service-categories/:id')
   deleteServiceCategory(@Param('id', ParseIntPipe) id: number) {
     return this.booking.deleteServiceCategory(id)
   }

   @Get('specialists')
   specialists(@Query() query: BookingFilterQueryDto) {
     return this.booking.listSpecialists(query.branchId, query.serviceId)
   }

   @Post('specialists')
   createSpecialist(@Body() data: any) {
     return this.booking.createSpecialist(data)
   }

   @Patch('specialists/:id')
   updateSpecialist(@Param('id', ParseIntPipe) id: number, @Body() data: any) {
     return this.booking.updateSpecialist(id, data)
   }

   @Delete('specialists/:id')
   deleteSpecialist(@Param('id', ParseIntPipe) id: number) {
     return this.booking.deleteSpecialist(id)
   }

+
+  @Get('slot-suggestions')
+  slotSuggestions(
+    @Query('branchId') branchId: string,
+    @Query('serviceId') serviceId: string,
+    @Query('date') date: string,
+  ) {
+    const parsedBranchId = Number(branchId)
+    const parsedServiceId = Number(serviceId)
+    if (!Number.isInteger(parsedBranchId) || parsedBranchId < 1) {
+      throw new BadRequestException('branchId must be a positive integer')
+    }
+    if (!Number.isInteger(parsedServiceId) || parsedServiceId < 1) {
+      throw new BadRequestException('serviceId must be a positive integer')
+    }
+    if (!date) {
+      throw new BadRequestException('date is required')
+    }
+
+    return this.booking.getSlotSuggestions(parsedBranchId, parsedServiceId, date)
+  }
+
   @Get('appointments')
-  appointments(@Query() query: BookingFilterQueryDto) {
-    return this.booking.listAppointments(query.userId)
+  appointments() {
+    return this.booking.listAppointments()
   }

   @Patch('appointments/:id')
   updateAppointment(@Param('id', ParseIntPipe) id: number, @Body() data: any) {
     return this.booking.updateAppointment(id, data)
   }

   @Delete('appointments/:id')
   deleteAppointment(@Param('id', ParseIntPipe) id: number) {
     return this.booking.deleteAppointment(id)
   }

   @Get('service-reviews')
   serviceReviews(@Query() query: BookingFilterQueryDto) {
     return this.booking.listServiceReviews(query.serviceId)
   }

   @Post('service-reviews')
   createServiceReview(@Body() data: any) {
     return this.booking.createServiceReview(data)
   }

   @Delete('service-reviews/:id')
   deleteServiceReview(@Param('id', ParseIntPipe) id: number) {
     return this.booking.deleteServiceReview(id)
diff --git a/backend/ayanavitabackend/app/api/src/booking/booking.service.ts b/backend/ayanavitabackend/app/api/src/booking/booking.service.ts
index 26f89487ec2fcbb286a39e1b9318d64aa61b94c3..5b803f075ab73a76d444a082ac00a847b881a44b 100644
--- a/backend/ayanavitabackend/app/api/src/booking/booking.service.ts
+++ b/backend/ayanavitabackend/app/api/src/booking/booking.service.ts
@@ -362,61 +362,152 @@ export class BookingService {
       },
       select: {
         id: true,
         code: true,
         name: true,
         level: true,
         bio: true,
         branchId: true,
         serviceLinks: { select: { serviceId: true } },
       },
       orderBy: { id: 'asc' },
     })

     return rows.map((s) => ({
       id: s.id,
       code: s.code,
       name: s.name,
       level: s.level,
       bio: s.bio,
       branchId: s.branchId,
       serviceIds: [...new Set(s.serviceLinks.map((srv) => srv.serviceId))],
     }))
   }


-  listAppointments(userId?: number) {
+  listAppointments() {
     return this.prisma.appointment.findMany({
-      where: userId ? { userId } : {},
       include: {
         branch: { select: { id: true, name: true } },
         service: { select: { id: true, name: true, durationMin: true, price: true } },
         specialist: { select: { id: true, name: true, level: true } },
       },
       orderBy: { appointmentAt: 'desc' },
     })
   }
+
+  private parseDateWindow(date: string) {
+    const dayStart = new Date(`${date}T00:00:00`)
+    const dayEnd = new Date(`${date}T23:59:59.999`)
+    if (Number.isNaN(dayStart.getTime()) || Number.isNaN(dayEnd.getTime())) {
+      throw new BadRequestException('Invalid date format, expected yyyy-mm-dd')
+    }
+    return { dayStart, dayEnd }
+  }
+
+  private toTimeLabel(date: Date) {
+    return `${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`
+  }
+
+  private overlaps(startA: Date, endA: Date, startB: Date, endB: Date) {
+    return startA < endB && endA > startB
+  }
+
+  private async getServiceCapacity(branchId: number, serviceId: number) {
+    return this.prisma.specialistBranchService.count({
+      where: {
+        branchId,
+        serviceId,
+        specialist: { isActive: true },
+      },
+    })
+  }
+
+  private async countOverlappingAppointments(params: {
+    branchId: number
+    serviceId: number
+    start: Date
+    end: Date
+    ignoreAppointmentId?: number
+  }) {
+    const rows = await this.prisma.appointment.findMany({
+      where: {
+        branchId: params.branchId,
+        serviceId: params.serviceId,
+        status: { not: 'CANCELED' },
+        appointmentAt: {
+          gte: new Date(params.start.getTime() - 12 * 60 * 60 * 1000),
+          lte: new Date(params.end.getTime() + 12 * 60 * 60 * 1000),
+        },
+        ...(params.ignoreAppointmentId ? { id: { not: params.ignoreAppointmentId } } : {}),
+      },
+      select: { id: true, appointmentAt: true, service: { select: { durationMin: true } } },
+    })
+
+    return rows.filter((row) => {
+      const start = new Date(row.appointmentAt)
+      const end = new Date(start.getTime() + row.service.durationMin * 60000)
+      return this.overlaps(params.start, params.end, start, end)
+    }).length
+  }
+
+  async getSlotSuggestions(branchId: number, serviceId: number, date: string) {
+    const [service, branchService] = await Promise.all([
+      this.prisma.service.findUnique({ where: { id: serviceId }, select: { id: true, durationMin: true } }),
+      this.prisma.branchService.findUnique({ where: { branchId_serviceId: { branchId, serviceId } } }),
+    ])
+
+    if (!service) throw new NotFoundException('Service not found')
+    if (!branchService) throw new BadRequestException('Service is not available in this branch')
+
+    const capacity = await this.getServiceCapacity(branchId, serviceId)
+    const durationMin = Math.max(1, service.durationMin || 1)
+
+    const { dayStart } = this.parseDateWindow(date)
+    const slotStart = new Date(dayStart)
+    slotStart.setHours(7, 0, 0, 0)
+    const closing = new Date(dayStart)
+    closing.setHours(21, 0, 0, 0)
+
+    const slots: Array<{ time: string; available: boolean; occupied: number }> = []
+    for (let cursor = new Date(slotStart); cursor < closing; cursor = new Date(cursor.getTime() + durationMin * 60000)) {
+      const end = new Date(cursor.getTime() + durationMin * 60000)
+      const occupied = await this.countOverlappingAppointments({ branchId, serviceId, start: cursor, end })
+      slots.push({
+        time: this.toTimeLabel(cursor),
+        occupied,
+        available: capacity > occupied,
+      })
+    }
+
+    return {
+      durationMin,
+      capacity,
+      slots,
+    }
+  }
+
   async listServiceReviews(serviceId?: number): Promise<ServiceReviewResponseDto[]> {
     const rows = await this.prisma.serviceReview.findMany({
       where: serviceId ? { serviceId } : {},
       select: {
         id: true,
         serviceId: true,
         userId: true,
         stars: true,
         comment: true,
         customerName: true,
         createdAt: true,
       },
       orderBy: { id: 'desc' },
     })

     return rows
   }

   async createAppointment(dto: CreateAppointmentDto) {
     const appointmentAt = new Date(dto.appointmentAt)
     if (Number.isNaN(appointmentAt.getTime())) {
       throw new BadRequestException('Invalid appointmentAt date')
     }

     const [branch, service] = await Promise.all([
@@ -428,64 +519,95 @@ export class BookingService {
     if (!service) throw new NotFoundException('Service not found')

     const branchService = await this.prisma.branchService.findUnique({
       where: { branchId_serviceId: { branchId: dto.branchId, serviceId: dto.serviceId } },
     })

     if (!branchService) {
       throw new BadRequestException('Service is not available in this branch')
     }

     if (dto.specialistId) {
       const specialist = await this.prisma.specialist.findUnique({ where: { id: dto.specialistId } })
       if (!specialist) throw new NotFoundException('Specialist not found')

       if (specialist.branchId !== dto.branchId) {
         throw new BadRequestException('Specialist does not belong to this branch')
       }

       const specialistBranchService = await this.prisma.specialistBranchService.findUnique({
         where: { specialistId_branchId_serviceId: { specialistId: dto.specialistId, branchId: dto.branchId, serviceId: dto.serviceId } },
       })

       if (!specialistBranchService) {
         throw new BadRequestException('Specialist is not available for this service in selected branch')
       }
+
+      const specialistAppointments = await this.prisma.appointment.findMany({
+        where: {
+          specialistId: dto.specialistId,
+          status: { not: 'CANCELED' },
+          appointmentAt: {
+            gte: new Date(appointmentAt.getTime() - 12 * 60 * 60 * 1000),
+            lte: new Date(appointmentAt.getTime() + 12 * 60 * 60 * 1000),
+          },
+        },
+        select: { appointmentAt: true, service: { select: { durationMin: true } } },
+      })
+      const specialistConflict = specialistAppointments.some((row) => {
+        const start = new Date(row.appointmentAt)
+        const end = new Date(start.getTime() + row.service.durationMin * 60000)
+        return this.overlaps(appointmentAt, new Date(appointmentAt.getTime() + service.durationMin * 60000), start, end)
+      })
+      if (specialistConflict) {
+        throw new BadRequestException('Specialist is already occupied at this time')
+      }
+    }
+
+    const capacity = await this.getServiceCapacity(dto.branchId, dto.serviceId)
+    const occupied = await this.countOverlappingAppointments({
+      branchId: dto.branchId,
+      serviceId: dto.serviceId,
+      start: appointmentAt,
+      end: new Date(appointmentAt.getTime() + service.durationMin * 60000),
+    })
+
+    if (capacity <= occupied) {
+      throw new BadRequestException('Selected time is fully booked for this service in selected branch')
     }

     const created = await this.prisma.appointment.create({
       data: {
         code: `APM-${Date.now()}`,
         customerName: dto.customerName,
         customerPhone: dto.customerPhone,
         customerEmail: dto.customerEmail,
         appointmentAt,
         note: dto.note,
         branchId: dto.branchId,
         serviceId: dto.serviceId,
         specialistId: dto.specialistId,
-        userId: dto.userId,
       },
       include: {
         branch: { select: { id: true, name: true } },
         service: { select: { id: true, name: true, durationMin: true, price: true } },
         specialist: { select: { id: true, name: true, level: true } },
       },
     })

     return created
   }

   async updateAppointment(id: number, data: any) {
     return this.prisma.appointment.update({ where: { id }, data })
   }

   async deleteAppointment(id: number) {
     await this.prisma.appointment.delete({ where: { id } })
     return { ok: true }
   }


   private sanitizeServiceData(data: any): { serviceData: Prisma.ServiceUncheckedCreateInput; branchIds: number[] } {
     const goalsInput = Array.isArray(data.goals) ? data.goals : []
     const suitableForInput = Array.isArray(data.suitableFor) ? data.suitableFor : []
     const processInput = Array.isArray(data.process) ? data.process : []
diff --git a/backend/ayanavitabackend/app/api/src/booking/dto/booking-query.dto.ts b/backend/ayanavitabackend/app/api/src/booking/dto/booking-query.dto.ts
index ade76a93e8a3ca961b6903852ab1f3d67fd875a0..4240dfabb17a02bdccf06e8c197aae43e4896c49 100644
--- a/backend/ayanavitabackend/app/api/src/booking/dto/booking-query.dto.ts
+++ b/backend/ayanavitabackend/app/api/src/booking/dto/booking-query.dto.ts
@@ -1,43 +1,37 @@
 import { Transform, Type } from 'class-transformer'
 import { IsInt, IsOptional, IsString, Max, Min } from 'class-validator'

 export class BookingFilterQueryDto {
   @IsOptional()
   @Type(() => Number)
   @IsInt()
   @Min(1)
   branchId?: number

   @IsOptional()
   @Type(() => Number)
   @IsInt()
   @Min(1)
   serviceId?: number

-  @IsOptional()
-  @Type(() => Number)
-  @IsInt()
-  @Min(1)
-  userId?: number
-
   @IsOptional()
   @IsString()
   q?: string

   @IsOptional()
   @Type(() => Number)
   @IsInt()
   @Min(1)
   page?: number

   @IsOptional()
   @Type(() => Number)
   @IsInt()
   @Min(1)
   @Max(100)
   pageSize?: number

   @IsOptional()
   @Transform(({ value }) => value === 'true' || value === true)
   includeInactive?: boolean
 }
diff --git a/backend/ayanavitabackend/app/api/src/booking/dto/create-appointment.dto.ts b/backend/ayanavitabackend/app/api/src/booking/dto/create-appointment.dto.ts
index f8310c1674364ab324c88dec752577edae95c285..8da9792d5adcfd458c5f6693ad1bcbd9aa5ca293 100644
--- a/backend/ayanavitabackend/app/api/src/booking/dto/create-appointment.dto.ts
+++ b/backend/ayanavitabackend/app/api/src/booking/dto/create-appointment.dto.ts
@@ -10,31 +10,26 @@ export class CreateAppointmentDto {
   customerPhone!: string

   @IsOptional()
   @IsEmail()
   customerEmail?: string

   @IsString()
   appointmentAt!: string

   @IsOptional()
   @IsString()
   note?: string

   @IsInt()
   @Min(1)
   branchId!: number

   @IsInt()
   @Min(1)
   serviceId!: number

   @IsOptional()
   @IsInt()
   @Min(1)
   specialistId?: number
-
-  @IsOptional()
-  @IsInt()
-  @Min(1)
-  userId?: number
 }
